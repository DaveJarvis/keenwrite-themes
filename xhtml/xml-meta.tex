% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%
% Map metadata (head) elements to front matter macros
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\startxmlsetups xml:title
  \setupdocument[title={\xmlflush{#1}}]
  \setupinteraction[title={\documentvariable{title}}]
\stopxmlsetups

\startxmlsetups xml:author
  \setupdocument[author={\xmlatt{#1}{content}}]
  \setupinteraction[author={\documentvariable{author}}]
\stopxmlsetups

\startxmlsetups xml:byline
  \setupdocument[byline={\xmlatt{#1}{content}}]
  \setupinteraction[author={\documentvariable{byline}}]
\stopxmlsetups

\startluacode
function xml.functions.address( t )
  context( t.at["content"] )
end
\stopluacode

\startxmlsetups xml:address
  \setupdocument[address={\xmlfunction{#1}{address}}]
\stopxmlsetups

\startxmlsetups xml:phone
  \setupdocument[phone={\xmlatt{#1}{content}}]
\stopxmlsetups

\startxmlsetups xml:email
  \setupdocument[email={\xmlatt{#1}{content}}]
\stopxmlsetups

\startxmlsetups xml:byline
  \setupdocument[byline={\xmlatt{#1}{content}}]
  \setupinteraction[author={\documentvariable{byline}}]
\stopxmlsetups

\startxmlsetups xml:wordcount
  \setupdocument[words={\xmlatt{#1}{content}}]
\stopxmlsetups

\startxmlsetups xml:keywords
  \setupdocument[metadata:keywords={\xmlatt{#1}{content}}]
\stopxmlsetups

